<main id="mainContent" class="content shifted p-4">
  <div class="container-fluid">
    <div class="d-flex align-items-center gap-3 mb-3">
      <h2 class="heading">Article</h2>
      <button class="btn" data-bs-toggle="modal" data-bs-target="#filterModal">
        Filter
      </button>

      <!-- Tombol Tambah Article -->
      <a href="/editor/articles/add-article" class="btn"> Add Article </a>
    </div>
    <!-- Pagination di atas -->
    <nav class="d-flex justify-content-end mb-4">
      <ul class="pagination pagination-sm m-0">
        <% if (currentPage > 1) { %>
        <li class="page-item">
          <a class="page-link" href="/articles?page=<%= currentPage - 1 %>"
            >&laquo;</a
          >
        </li>
        <% } %> <% for (let i = 1; i <= totalPages; i++) { %> <% if (i === 1 ||
        i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) { %>
        <li class="page-item <%= i === currentPage ? 'active' : '' %>">
          <a class="page-link" href="/articles?page=<%= i %>"><%= i %></a>
        </li>
        <% } else if (i === currentPage - 2 || i === currentPage + 2) { %>
        <li class="page-item disabled"><span class="page-link">...</span></li>
        <% } %> <% } %> <% if (currentPage < totalPages) { %>
        <li class="page-item">
          <a class="page-link" href="/articles?page=<%= currentPage + 1 %>"
            >&raquo;</a
          >
        </li>
        <% } %>
      </ul>
    </nav>

    <!-- Modal Filter -->
    <div
      class="modal fade"
      id="filterModal"
      tabindex="-1"
      aria-labelledby="filterModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <form method="GET" action="/articles">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="filterModalLabel">Filter Article</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="tanggal" class="form-label">Tanggal</label>
                <input
                  type="date"
                  id="tanggal"
                  name="tanggal"
                  class="form-control"
                />
              </div>
              <div class="mb-3">
                <label for="keyword" class="form-label">Keyword</label>
                <input
                  type="text"
                  id="keyword"
                  name="keyword"
                  class="form-control"
                  placeholder="Cari judul atau tema..."
                />
              </div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">
                Terapkan Filter
              </button>
              <a href="/articles" class="btn btn-secondary">Reset</a>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Card Article -->
    <% if (noArticlesFound) { %>
    <div class="alert alert-warning text-center">
      Tidak ada artikel yang ditemukan dengan filter yang dipilih.
    </div>
    <% } else { %>
    <div class="d-flex flex-column gap-3">
      <% articlesPerPage.forEach((article) => { %>
      <a
        href="/editor/articles/<%= encodeURIComponent(article.judul) %>"
        class="text-decoration-none"
      >
        <div class="card border-0 rounded-4 clickable-card overflow-hidden">
          <div
            class="card-body article-card"
            style="background-image: url('<%= article.image %>')"
          >
            <div class="card-overlay"></div>
            <div class="content text-white">
              <h5 class="card-heading fw-bold mb-2"><%= article.judul %></h5>
              <small class="card-author d-block mb-1">
                Created By <%= article.penulis %>
              </small>
              <p class="card-info mb-2"><%= article.ringkasan %></p>
              <small class="card-date"><%= article.tanggal %></small>
            </div>
          </div>
        </div>
      </a>
      <% }) %>
    </div>
    <% } %>
  </div>
</main>
